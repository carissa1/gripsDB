{% extends "base.html" %}
{% load static %}


{% block content %}

    <div class="lineage" data-slug='avgfp'></div>


{% endblock content %}

{% block javascript %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js" charset="utf-8"></script>
<script src="{% static 'js/lineage.js' %}"></script>


<script>


$('.lineage').each(function(i, el){
  $.getJSON("/ajax/lineage/" + ($(el).data('slug') || ''), function(data){
    chart = LineageChart().data(data).withSearch(true).withToolbar(true);
    var lineage = d3.select(el)
    lineage.call(chart);

    var resizeTimer;
    $(window).on('resize', function(e) {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(function() {
        lineage.call(chart);
      }, 100);
    });
  })
});


</script>


{% endblock javascript %}
