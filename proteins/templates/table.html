{% extends "base.html" %}
{% load static %}

{% block vendorcss %}
<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.16/css/jquery.dataTables.css">
{% endblock %}

{% block title %}Fluorescent Protein Properties Table{% endblock %}


{% block container-class %}tablecontainer{% endblock %}

{% block content %}

<h2 class="text-center">Fluorescent Protein Table</h2>
<div class="table-responsive">

	<form class='form-inline'>
	<div class="form-group">
	  <label for="switch_filter" class='pr-2'>Switch Type: </label>
	  <select class="form-control table-filter" id='switch_filter' data-col='switch_type'>
	  	<option value=''>All</option>
	  	{% for choice in proteins.0.SWITCHING_CHOICES %}
	    <option value='{{ choice.0 }}'>{{ choice.1 }}</option>
	    {% endfor %}
	  </select>
	</div>
	<div class="form-group">
	  <label for="agg_filter" class='pr-2'>Aggregation Type: </label>
	  <select class="form-control table-filter" id='agg_filter' data-col='agg_type'>
	  	<option value=''>All</option>
	  	{% for choice in proteins.0.AGG_CHOICES %}
	    <option value='{{ choice.0 }}'>{{ choice.1 }}</option>
	    {% endfor %}
	  </select>
	</div>
	<form class='form-inline'>


	{% with showbleach=True %}{% include '_proteintable.html' %}{% endwith %}
</div>
{% endblock %}


{% block javascript %}
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.16/b-1.4.2/b-colvis-1.4.2/b-print-1.4.2/cr-1.4.1/fc-3.2.3/fh-3.1.3/r-2.2.0/datatables.min.js"></script>

<script type="text/javascript">

function get_color_group(exwave){
    if (exwave < 380){ return "#C080FF" } //
    if (exwave < 420){ return "#8080FF" } // Blue
    if (exwave < 473){ return "#80FFFF" } // Cyan
    if (exwave < 507){ return "#80FF80" } // Green
    if (exwave < 515){ return "#CCFF80" } // Yellow-Green
    if (exwave < 531){ return "#FFFF80" } // Yellow
    if (exwave < 555){ return "#FFC080" } // Orange
    if (exwave < 600){ return "#FFA080" } // Red
    if (exwave < 631){ return "#FF8080" } // Far red
    if (exwave < 800){ return "#B09090" } // Near IR
}

$(function() {
	$('#proteinTable').DataTable({
		"pageLength": 50,
		"autoWidth": false,
		"lengthMenu": [ [10, 25, 50, 100, -1], [10, 25, 50, 100,"All"] ],
		'fixedHeader': {
		    'header': false,
		    'footer': true
		},
		"order": [[ 2, 'asc' ], [ 1, 'asc' ]],
	});

	$('.table-filter').change(function(){
		var searchval = this.value;
		if (searchval != ''){
			searchval = '^' + this.value +'$';
		}
		searchcol = $(this).attr('data-col')
		$('#proteinTable').DataTable().column('.' + searchcol).search(searchval, true, false).draw();
	});

	// $('.exmax').each(function(){
	// 	$(this).closest('tr').css('background-color', get_color_group($(this).html()))
	// })

});
</script>
{% endblock	%}



